import{_ as Z,b as ee,d as A,i as Ge,u as Je,a as We,w as Xe,c as Ye,E as re,e as Qe,f as Ze,g as he}from"./base-bflHmD82.js";import{o as ge,E as et,a as tt}from"./el-page-header-DSUIZmvO.js";import{E as ie}from"./el-button-4r8E0DMI.js";import{F as nt,E as Ie}from"./el-empty-DUeByfxe.js";import{E as Le}from"./el-input-0vVVtHA2.js";import{d as B,o as f,a as C,b as h,n as R,l as x,m as b,p as ye,q as ot,s as ce,g as v,v as Oe,c as M,h as $,w as _,x as w,t as T,j as S,f as j,y as st,z as lt,A as U,B as at,C as z,D as Q,e as k,E as we,G as D,i as F,I as Y,J as te,T as rt,K as Ae,L as Fe,M as Pe,N as be,O as it,P as Ce,F as Ne,r as Ve,Q as Ee,R as ne,S as ct,u as dt}from"./index-DpTwNufQ.js";import{s as ut,g as ft,a as pt,b as mt,i as vt}from"./index-C5mZHfjg.js";import{E as ht,u as gt,a as yt,b as wt,D as _e,S as bt,c as $e}from"./el-overlay-3bdzUH2M.js";import{_ as J}from"./plugin-vueexport-helper-DlAUqK2U.js";import{u as se,a as I,E as Ct,b as Et,C as _t}from"./el-popper-Bder4sn0.js";import{c as $t,i as kt,T as Mt,u as Bt,a as ke,b as Me}from"./index-Xv_KeUan.js";import{E as de}from"./el-message-BwlTGCWP.js";import{E as Ht}from"./aria-BUADUvnR.js";import"./typescript-DvA-nEXU.js";import"./index-DooEso7-.js";import"./commonjsHelpers-Cpj98o6Y.js";import"./consumable-Dnn1CoAQ.js";import"https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js";const St={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Tt=h("path",{d:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm11.84 12.14L22 17.52V5.62a12 12 0 0 1 5.84 8.52zM12 18.68v-5.36L16 11l4 2.31v5.36L16 21zm8-14V11l-9.66-5.58A11.9 11.9 0 0 1 20 4.7zm-11.52 2L14 9.85L4 15.62a12 12 0 0 1 4.48-8.96zM4.16 17.85L10 14.47v11.91a12 12 0 0 1-5.84-8.53zM12 27.3V21l9.67 5.58A11.92 11.92 0 0 1 16 28a12.05 12.05 0 0 1-4-.7zm11.52-2L18 22.14l10-5.77a12 12 0 0 1-4.48 8.97z",fill:"currentColor"},null,-1),It=[Tt],Lt=B({name:"Aperture",render:function(t,n){return f(),C("svg",St,It)}}),Ot={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},At=h("path",{d:"M25.7 9.3l-7-7A.908.908 0 0 0 18 2H8a2.006 2.006 0 0 0-2 2v24a2.006 2.006 0 0 0 2 2h16a2.006 2.006 0 0 0 2-2V10a.908.908 0 0 0-.3-.7zM18 4.4l5.6 5.6H18zM24 28H8V4h8v6a2.006 2.006 0 0 0 2 2h6z",fill:"currentColor"},null,-1),Ft=[At],Pt=B({name:"DocumentBlank",render:function(t,n){return f(),C("svg",Ot,Ft)}}),Nt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Vt=h("path",{d:"M2 26h28v2H2z",fill:"currentColor"},null,-1),zt=h("path",{d:"M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z",fill:"currentColor"},null,-1),Rt=[Vt,zt],Be=B({name:"Edit",render:function(t,n){return f(),C("svg",Nt,Rt)}}),Dt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},jt=h("path",{d:"M18 13l-1.41 1.41L19.17 17H10v2h9.17l-2.58 2.59L18 23l5-5l-5-5z",fill:"currentColor"},null,-1),Ut=h("path",{d:"M11.172 6l3.414 3.414l.586.586H28v16H4V6h7.172m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.414-3.414A2 2 0 0 0 11.172 4z",fill:"currentColor"},null,-1),Kt=[jt,Ut],He=B({name:"FolderMoveTo",render:function(t,n){return f(),C("svg",Dt,Kt)}}),qt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},xt=h("path",{d:"M28 8h-7.172l-3.414-3.414A2 2 0 0 0 16 4H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2zM8 26V14h8v6.17l-2.59-2.58L12 19l5 5l5-5l-1.41-1.41L18 20.17V14a2.002 2.002 0 0 0-2-2H8a2.002 2.002 0 0 0-2 2v12H4V6h12l4 4h8v2h-6v2h6v12z",fill:"currentColor"},null,-1),Gt=[xt],Jt=B({name:"FolderOpen",render:function(t,n){return f(),C("svg",qt,Gt)}}),Wt=e=>["",...$t].includes(e),le="_trap-focus-children",P=[],Se=e=>{if(P.length===0)return;const t=P[P.length-1][le];if(t.length>0&&e.code===Ht.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const n=e.shiftKey,s=e.target===t[0],i=e.target===t[t.length-1];s&&n&&(e.preventDefault(),t[t.length-1].focus()),i&&!n&&(e.preventDefault(),t[0].focus())}},Xt={beforeMount(e){e[le]=ge(e),P.push(e),P.length<=1&&document.addEventListener("keydown",Se)},updated(e){R(()=>{e[le]=ge(e)})},unmounted(){P.shift(),P.length===0&&document.removeEventListener("keydown",Se)}},Yt=B({inheritAttrs:!1});function Qt(e,t,n,s,i,r){return x(e.$slots,"default")}var Zt=Z(Yt,[["render",Qt],["__file","collection.vue"]]);const en=B({name:"ElCollectionItem",inheritAttrs:!1});function tn(e,t,n,s,i,r){return x(e.$slots,"default")}var nn=Z(en,[["render",tn],["__file","collection-item.vue"]]);const on="data-el-collection-item",sn=e=>{const t=`El${e}Collection`,n=`${t}Item`,s=Symbol(t),i=Symbol(n),r={...Zt,name:t,setup(){const m=b(null),u=new Map;ye(s,{itemMap:u,getItems:()=>{const l=v(m);if(!l)return[];const c=Array.from(l.querySelectorAll(`[${on}]`));return[...u.values()].sort((g,H)=>c.indexOf(g.ref)-c.indexOf(H.ref))},collectionRef:m})}},d={...nn,name:n,setup(m,{attrs:u}){const o=b(null),l=ot(s,void 0);ye(i,{collectionItemRef:o}),ce(()=>{const c=v(o);c&&l.itemMap.set(c,{ref:c,...u})}),Oe(()=>{const c=v(o);l.itemMap.delete(c)})}};return{COLLECTION_INJECTION_KEY:s,COLLECTION_ITEM_INJECTION_KEY:i,ElCollection:r,ElCollectionItem:d}},oe=ee({trigger:se.trigger,effect:{...I.effect,default:"light"},type:{type:A(String)},placement:{type:A(String),default:"bottom"},popperOptions:{type:A(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:A([Number,String]),default:0},maxHeight:{type:A([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:A(Object)},teleported:I.teleported});ee({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:kt}});ee({onKeydown:{type:A(Function)}});sn("Dropdown");const ln=ee({trigger:se.trigger,placement:oe.placement,disabled:se.disabled,visible:I.visible,transition:I.transition,popperOptions:oe.popperOptions,tabindex:oe.tabindex,content:I.content,popperStyle:I.popperStyle,popperClass:I.popperClass,enterable:{...I.enterable,default:!0},effect:{...I.effect,default:"light"},teleported:I.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),an={"update:visible":e=>Ge(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},rn="onUpdate:visible",cn=B({name:"ElPopover"}),dn=B({...cn,props:ln,emits:an,setup(e,{expose:t,emit:n}){const s=e,i=M(()=>s[rn]),r=Je("popover"),d=b(),m=M(()=>{var p;return(p=v(d))==null?void 0:p.popperRef}),u=M(()=>[{width:We(s.width)},s.popperStyle]),o=M(()=>[r.b(),s.popperClass,{[r.m("plain")]:!!s.content}]),l=M(()=>s.transition===`${r.namespace.value}-fade-in-linear`),c=()=>{var p;(p=d.value)==null||p.hide()},a=()=>{n("before-enter")},g=()=>{n("before-leave")},H=()=>{n("after-enter")},E=()=>{n("update:visible",!1),n("after-leave")};return t({popperRef:m,hide:c}),(p,N)=>(f(),$(v(Ct),st({ref_key:"tooltipRef",ref:d},p.$attrs,{trigger:p.trigger,placement:p.placement,disabled:p.disabled,visible:p.visible,transition:p.transition,"popper-options":p.popperOptions,tabindex:p.tabindex,content:p.content,offset:p.offset,"show-after":p.showAfter,"hide-after":p.hideAfter,"auto-close":p.autoClose,"show-arrow":p.showArrow,"aria-label":p.title,effect:p.effect,enterable:p.enterable,"popper-class":v(o),"popper-style":v(u),teleported:p.teleported,persistent:p.persistent,"gpu-acceleration":v(l),"onUpdate:visible":v(i),onBeforeShow:a,onBeforeHide:g,onShow:H,onHide:E}),{content:_(()=>[p.title?(f(),C("div",{key:0,class:w(v(r).e("title")),role:"title"},T(p.title),3)):S("v-if",!0),x(p.$slots,"default",{},()=>[j(T(p.content),1)])]),default:_(()=>[p.$slots.reference?x(p.$slots,"reference",{key:0}):S("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var un=Z(dn,[["__file","popover.vue"]]);const Te=(e,t)=>{const n=t.arg||t.value,s=n==null?void 0:n.popperRef;s&&(s.triggerRef=e)};var fn={mounted(e,t){Te(e,t)},updated(e,t){Te(e,t)}};const pn="popover",mn=Xe(fn,pn),vn=Ye(un,{directive:mn}),hn=B({name:"ElMessageBox",directives:{TrapFocus:Xt},components:{ElButton:ie,ElFocusTrap:Et,ElInput:Le,ElOverlay:ht,ElIcon:re,...Mt},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Wt},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:n,zIndex:s,ns:i,size:r}=Bt("message-box",M(()=>e.buttonSize)),{t:d}=n,{nextZIndex:m}=s,u=b(!1),o=lt({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:m()}),l=M(()=>{const y=o.type;return{[i.bm("icon",y)]:y&&ke[y]}}),c=Me(),a=Me(),g=M(()=>o.icon||ke[o.type]||""),H=M(()=>!!o.message),E=b(),p=b(),N=b(),W=b(),ue=b(),Re=M(()=>o.confirmButtonClass);U(()=>o.inputValue,async y=>{await R(),e.boxType==="prompt"&&y!==null&&pe()},{immediate:!0}),U(()=>u.value,y=>{var L,V;y&&(e.boxType!=="prompt"&&(o.autofocus?N.value=(V=(L=ue.value)==null?void 0:L.$el)!=null?V:E.value:N.value=E.value),o.zIndex=m()),e.boxType==="prompt"&&(y?R().then(()=>{var ve;W.value&&W.value.$el&&(o.autofocus?N.value=(ve=qe())!=null?ve:E.value:N.value=E.value)}):(o.editorErrorMessage="",o.validateError=!1))});const De=M(()=>e.draggable),je=M(()=>e.overflow);gt(E,p,De,je),ce(async()=>{await R(),e.closeOnHashChange&&window.addEventListener("hashchange",q)}),Oe(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",q)});function q(){u.value&&(u.value=!1,R(()=>{o.action&&t("action",o.action)}))}const fe=()=>{e.closeOnClickModal&&X(o.distinguishCancelAndClose?"close":"cancel")},Ue=wt(fe),Ke=y=>{if(o.inputType!=="textarea")return y.preventDefault(),X("confirm")},X=y=>{var L;e.boxType==="prompt"&&y==="confirm"&&!pe()||(o.action=y,o.beforeClose?(L=o.beforeClose)==null||L.call(o,y,o,q):q())},pe=()=>{if(e.boxType==="prompt"){const y=o.inputPattern;if(y&&!y.test(o.inputValue||""))return o.editorErrorMessage=o.inputErrorMessage||d("el.messagebox.error"),o.validateError=!0,!1;const L=o.inputValidator;if(typeof L=="function"){const V=L(o.inputValue);if(V===!1)return o.editorErrorMessage=o.inputErrorMessage||d("el.messagebox.error"),o.validateError=!0,!1;if(typeof V=="string")return o.editorErrorMessage=V,o.validateError=!0,!1}}return o.editorErrorMessage="",o.validateError=!1,!0},qe=()=>{const y=W.value.$refs;return y.input||y.textarea},me=()=>{X("close")},xe=()=>{e.closeOnPressEscape&&me()};return e.lockScroll&&yt(u),{...at(o),ns:i,overlayEvent:Ue,visible:u,hasMessage:H,typeClass:l,contentId:c,inputId:a,btnSize:r,iconComponent:g,confirmButtonClasses:Re,rootRef:E,focusStartRef:N,headerRef:p,inputRef:W,confirmRef:ue,doClose:q,handleClose:me,onCloseRequested:xe,handleWrapperClick:fe,handleInputEnter:Ke,handleAction:X,t:d}}}),gn=["aria-label","aria-describedby"],yn=["aria-label"],wn=["id"];function bn(e,t,n,s,i,r){const d=z("el-icon"),m=z("close"),u=z("el-input"),o=z("el-button"),l=z("el-focus-trap"),c=z("el-overlay");return f(),$(rt,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=a=>e.$emit("vanish")),persisted:""},{default:_(()=>[Q(k(c,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:_(()=>[h("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:w(`${e.ns.namespace.value}-overlay-message-box`),onClick:t[8]||(t[8]=(...a)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...a)),onMousedown:t[9]||(t[9]=(...a)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...a)),onMouseup:t[10]||(t[10]=(...a)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...a))},[k(l,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:_(()=>[h("div",{ref:"rootRef",class:w([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:we(e.customStyle),tabindex:"-1",onClick:t[7]||(t[7]=D(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(f(),C("div",{key:0,ref:"headerRef",class:w([e.ns.e("header"),{"show-close":e.showClose}])},[h("div",{class:w(e.ns.e("title"))},[e.iconComponent&&e.center?(f(),$(d,{key:0,class:w([e.ns.e("status"),e.typeClass])},{default:_(()=>[(f(),$(F(e.iconComponent)))]),_:1},8,["class"])):S("v-if",!0),h("span",null,T(e.title),1)],2),e.showClose?(f(),C("button",{key:0,type:"button",class:w(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:t[0]||(t[0]=a=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=Y(D(a=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[k(d,{class:w(e.ns.e("close"))},{default:_(()=>[k(m)]),_:1},8,["class"])],42,yn)):S("v-if",!0)],2)):S("v-if",!0),h("div",{id:e.contentId,class:w(e.ns.e("content"))},[h("div",{class:w(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(f(),$(d,{key:0,class:w([e.ns.e("status"),e.typeClass])},{default:_(()=>[(f(),$(F(e.iconComponent)))]),_:1},8,["class"])):S("v-if",!0),e.hasMessage?(f(),C("div",{key:1,class:w(e.ns.e("message"))},[x(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(f(),$(F(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(f(),$(F(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:_(()=>[j(T(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):S("v-if",!0)],2),Q(h("div",{class:w(e.ns.e("input"))},[k(u,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=a=>e.inputValue=a),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:w({invalid:e.validateError}),onKeydown:Y(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),h("div",{class:w(e.ns.e("errormsg")),style:we({visibility:e.editorErrorMessage?"visible":"hidden"})},T(e.editorErrorMessage),7)],2),[[te,e.showInput]])],10,wn),h("div",{class:w(e.ns.e("btns"))},[e.showCancelButton?(f(),$(o,{key:0,loading:e.cancelButtonLoading,class:w([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=a=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=Y(D(a=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:_(()=>[j(T(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):S("v-if",!0),Q(k(o,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:w([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=a=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=Y(D(a=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:_(()=>[j(T(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[te,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,gn)]),_:3},8,["z-index","overlay-class","mask"]),[[te,e.visible]])]),_:3})}var Cn=Z(hn,[["render",bn],["__file","index.vue"]]);const G=new Map,En=e=>{let t=document.body;return e.appendTo&&(Ae(e.appendTo)&&(t=document.querySelector(e.appendTo)),he(e.appendTo)&&(t=e.appendTo),he(t)||(t=document.body)),t},_n=(e,t,n=null)=>{const s=k(Cn,e,Ce(e.message)||Fe(e.message)?{default:Ce(e.message)?e.message:()=>e.message}:null);return s.appContext=n,Pe(s,t),En(e).appendChild(t.firstElementChild),s.component},$n=()=>document.createElement("div"),kn=(e,t)=>{const n=$n();e.onVanish=()=>{Pe(null,n),G.delete(i)},e.onAction=r=>{const d=G.get(i);let m;e.showInput?m={value:i.inputValue,action:r}:m=r,e.callback?e.callback(m,s.proxy):r==="cancel"||r==="close"?e.distinguishCancelAndClose&&r!=="cancel"?d.reject("close"):d.reject("cancel"):d.resolve(m)};const s=_n(e,n,t),i=s.proxy;for(const r in e)be(e,r)&&!be(i.$props,r)&&(i[r]=e[r]);return i.visible=!0,i};function K(e,t=null){if(!Qe)return Promise.reject();let n;return Ae(e)||Fe(e)?e={message:e}:n=e.callback,new Promise((s,i)=>{const r=kn(e,t??K._context);G.set(r,{options:e,callback:n,resolve:s,reject:i})})}const Mn=["alert","confirm","prompt"],Bn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Mn.forEach(e=>{K[e]=Hn(e)});function Hn(e){return(t,n,s,i)=>{let r="";return it(n)?(s=n,r=""):Ze(n)?r="":r=n,K(Object.assign({title:r,message:t,type:"",...Bn[e]},s,{boxType:e}),i)}}K.close=()=>{G.forEach((e,t)=>{t.doClose()}),G.clear()};K._context=null;const O=K;O.install=e=>{O._context=e._context,e.config.globalProperties.$msgbox=O,e.config.globalProperties.$messageBox=O,e.config.globalProperties.$alert=O.alert,e.config.globalProperties.$confirm=O.confirm,e.config.globalProperties.$prompt=O.prompt};const Sn=O,Tn=async(e,t)=>{const n=t.split(/\\|\//).filter(Boolean),s=n.pop()||"";return(await In(e,n.join("/"))).getFileHandle(s)},In=async(e,t)=>{const n=t.split(/\\|\//).filter(Boolean);let s=e;for(let i=0;i<n.length;i++){const r=n[i];s=await s.getDirectoryHandle(r)}return s};function Ln(e,t="Text"){const n=new FileReader;return new Promise((s,i)=>{n.onloadend=()=>s(n.result),n.onerror=i,e.getFile().then(r=>n[`readAs${t}`](r))})}const ae=async e=>{const t=[];for await(const n of e.handle.values()){const s=e.relativePath+"/"+n.name;n.kind==="directory"?t.unshift({handle:n,isOpened:!1,isLoading:!1,parent:e,relativePath:s}):t.push({handle:n,parent:e,relativePath:s})}return t},On=async(e,t,n)=>{if(!await(await Tn(e.handle,n)).isSameEntry(t))return e;const r=n.split("/").filter(Boolean);let d=e;for(let m=0;m<r.length;m++){d.isOpened=!0,d.children=await ae(d);const u=d.children.find(o=>o.handle.name===r[m]);if(!u)return e;d=u}return e},An={key:0,class:"flex flex-col"},Fn={key:0},Pn=B({__name:"ProjectTree",props:{node:{},activeFileHandle:{},contentMenuNode:{},searchVal:{}},emits:["changeActiveFileHandle","showMenu"],setup(e,{emit:t}){const n=e,s=t,i=M(()=>{const o=n.node;if(!o)return null;if("isLoading"in o&&o.isLoading)return Lt;const{kind:l,name:c}=o.handle;return"isOpened"in o&&l==="directory"?o.isOpened?Jt:nt:l==="file"?/\.json$/i.test(c)?_e:_e:Pt}),r=async o=>{if(o.handle.kind==="directory"){const l=o;if(l!=null&&l.isLoading)return;if(l.children===void 0){l.isLoading=!0;const c=await ae(l);l.children=c,l.isLoading=!1}l.isOpened=!l.isOpened}else{const l=o;s("changeActiveFileHandle",l.handle),ut(l.handle,l.relativePath)}n.node&&s("showMenu",n.node)},d=b(!1);U(()=>n.activeFileHandle,async()=>{var o,l;!n.activeFileHandle||!((o=n.node)!=null&&o.handle)||(d.value=await((l=n.node)==null?void 0:l.handle.isSameEntry(n.activeFileHandle)))},{immediate:!0});const m=o=>{o.preventDefault(),n.node&&s("showMenu",n.node,o)},u=(o,l)=>{s("showMenu",o,l)};return U(()=>n.node,async()=>{if(!n.node)return;const{handle:o}=n.node;if(o.kind==="directory"){const l=n.node;if(l.isOpened&&l.children===void 0){l.isLoading=!0;const c=await ae(l);l.children=c,l.isLoading=!1}}},{immediate:!0}),(o,l)=>{const c=re;return n.node?(f(),C("li",An,[h("div",{class:w(["node-info",{active:v(d),"clicked-node":n.contentMenuNode===n.node}]),onClick:l[0]||(l[0]=D(a=>r(n.node),["left"])),onContextmenu:D(m,["right","stop"])},[v(i)?(f(),$(c,{key:0,class:"mr-2"},{default:_(()=>[(f(),$(F(v(i))))]),_:1})):S("",!0),h("code",null,T(n.node.handle.name),1)],34),"children"in n.node&&n.node.handle.kind==="directory"&&n.node.isOpened?(f(),C("ul",Fn,[(f(!0),C(Ne,null,Ve(n.node.children,a=>(f(),$(ze,{key:a.handle.name,"active-file-handle":n.activeFileHandle,node:a,"search-val":n.searchVal,"content-menu-node":n.contentMenuNode,class:"ml-4 w-max-content overflow-hidden",onChangeActiveFileHandle:l[1]||(l[1]=g=>s("changeActiveFileHandle",g)),onShowMenu:u},null,8,["active-file-handle","node","search-val","content-menu-node"]))),128))])):S("",!0)])):S("",!0)}}}),ze=J(Pn,[["__scopeId","data-v-128df376"]]),Nn={class:"flex flex-col"},Vn=["onClick"],zn=B({__name:"index",props:{trigger:{},menus:{}},emits:["update:trigger","update:node"],setup(e,{emit:t}){const n=e,s=t,i=b(),r=M(()=>!!n.trigger),d=async u=>{await u.fn(),m()},m=()=>{s("update:trigger",null),s("update:node",null)};return(u,o)=>{const l=re,c=vn;return f(),$(c,{ref_key:"popoverRef",ref:i,"virtual-ref":n.trigger,visible:v(r),"virtual-triggering":"","popper-class":"content-menu",placement:"bottom-end"},{default:_(()=>[Q((f(),C("ul",Nn,[(f(!0),C(Ne,null,Ve(n.menus,a=>(f(),C("li",{key:a.label,class:w({disabled:a.disabled,divider:a.topDivider}),onClick:g=>d(a)},[k(l,{class:"mr-2"},{default:_(()=>[(f(),$(F(a.icon)))]),_:2},1024),h("span",null,T(a.label),1)],10,Vn))),128))])),[[v(_t),m]])]),_:1},8,["virtual-ref","visible"])}}}),Rn=J(zn,[["__scopeId","data-v-a01ce1da"]]),Dn={key:0,class:"flex flex-col"},jn={class:"flex items-center"},Un={class:"m-0 mt-2 w-300px overflow-auto"},Kn=B({__name:"index",props:{root:{},activeFileHandle:{}},emits:["changeActiveFileHandle"],setup(e,{emit:t}){const n=e,s=t,i=b(""),r=b(),d=b(null),m=(c,a)=>{a?(r.value=a.target,d.value=c):(r.value=null,d.value=null)},u=M(()=>{var c;return d.value?((c=d.value)==null?void 0:c.handle.kind)==="file"?[{label:"重命名",icon:Be,fn:()=>{},disabled:!0},{label:"移动到...",icon:He,fn:()=>{},disabled:!0},{label:"删除文件",icon:$e,fn:o,topDivider:!0}]:[{label:"重命名",icon:Be,fn:()=>{},disabled:!0},{label:"移动到...",icon:He,fn:()=>{},disabled:!0},{label:"删除目录",icon:$e,fn:o,topDivider:!0}]:[]}),o=async()=>{var E;if(!d.value)return;const{handle:c,parent:a}=d.value;if(!a||await Sn.confirm(`确定要删除 ${c.name} 吗？`,"删除确认",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>!1).catch(()=>!0))return;const H=await l(c,a);await a.handle.removeEntry(c.name,{recursive:!0}),H>-1&&((E=a.children)==null||E.splice(H,1)),de.success(`${c.name} 删除成功`)},l=async(c,a)=>{if(!(a!=null&&a.children))return-1;for(let g=0;g<a.children.length;g++){const{handle:H}=a.children[g];if(await H.isSameEntry(c))return g}return-1};return(c,a)=>{const g=Le,H=Ie;return n.root?(f(),C("div",Dn,[h("div",jn,[k(g,{modelValue:v(i),"onUpdate:modelValue":a[0]||(a[0]=E=>Ee(i)?i.value=E:null),"prefix-icon":v(bt),placeholder:"搜索暂未实现"},null,8,["modelValue","prefix-icon"])]),h("ul",Un,[k(ze,{activeFileHandle:c.activeFileHandle,node:n.root,"search-val":v(i),"content-menu-node":v(d),transition:"",onChangeActiveFileHandle:a[1]||(a[1]=E=>s("changeActiveFileHandle",E)),onShowMenu:m},null,8,["activeFileHandle","node","search-val","content-menu-node"])]),k(Rn,{trigger:v(r),"onUpdate:trigger":a[2]||(a[2]=E=>Ee(r)?r.value=E:null),menus:v(u)},null,8,["trigger","menus"])])):(f(),$(H,{key:1}))}}}),qn={class:"flex flex-col"},xn={class:"controls"},Gn={class:"font-bold"},Jn=B({__name:"FileContent",props:{fileHandle:{}},setup(e){ne.defineTheme("darkTheme",{base:"vs-dark",inherit:!0,rules:[{token:"",background:"#141414"}],colors:{"editor.background":"#141414"}}),ne.setTheme("darkTheme");let t;const n=e;U(()=>n.fileHandle,async()=>{n.fileHandle&&(await R(),i())},{immediate:!0});const s=b(),i=async()=>{var o;if(t&&((o=t.dispose)==null||o.call(t)),!s.value||!n.fileHandle)return;const u=await Ln(n.fileHandle);t=ne.create(s.value,{value:u,language:r(n.fileHandle),theme:ct().value?"darkTheme":"vs",foldingStrategy:"indentation",selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!0,glyphMargin:!1,fontSize:15})},r=u=>{const{name:o}=u;return/\.json$/i.test(o)?"json":/\.js|ts$/i.test(o)?"javascript":/\.ts$/i.test(o)?"typescript":/\.html|handlebars|razor$/i.test(o)?"html":/\.css|scss|less$/i.test(o)?"css":/\.bin$/i.test(o)?"shell":""},d=b(!1),m=()=>{if(!n.fileHandle)return;const u=n.fileHandle;d.value=!0,u.createWritable().then(o=>{const l=t.getValue();o.write(l),o.close(),de.success("保存成功")}).finally(()=>{d.value=!1})};return(u,o)=>{var c;const l=ie;return f(),C("div",qn,[h("div",xn,[h("code",Gn,T(((c=n.fileHandle)==null?void 0:c.name)||""),1),k(l,{type:"primary",size:"small",onClick:m},{default:_(()=>[j("保存")]),_:1})]),h("div",{ref_key:"editorContainer",ref:s,class:"flex flex-1 h-0"},null,512)])}}}),Wn=J(Jn,[["__scopeId","data-v-e09a1262"]]),Xn={};function Yn(e,t){const n=Ie;return f(),$(n,{description:"请先选择文件"})}const Qn=J(Xn,[["render",Yn]]),Zn=["src"],eo=B({__name:"ImgViewer",props:{fileHandle:{}},setup(e){const t=e,n=b();return U(()=>t.fileHandle,async()=>{if(t.fileHandle){const s=await t.fileHandle.getFile();n.value=URL.createObjectURL(s)}else URL.revokeObjectURL(n.value),n.value=""},{immediate:!0}),(s,i)=>(f(),C("img",{src:v(n),alt:"",srcset:""},null,8,Zn))}}),to=J(eo,[["__scopeId","data-v-999e1084"]]),no={class:"flex flex-col h-full w-full p-2 overflow-hidden"},oo={class:"flex items-center"},so=h("span",{style:{color:"var(--el-text-color-regular)"}}," 返回首页 ",-1),lo={key:0,class:"font-600 text-large mr-3"},ao={class:"flex flex-1 h-0 my-2 overflow-hidden"},Mo=B({__name:"index",setup(e){const t=b(),n=b(),s=b(!1),i=dt(),r=()=>window.showDirectoryPicker?(s.value=!0,window.showDirectoryPicker({mode:"readwrite"}).then(u=>{t.value={handle:u,isOpened:!0,isLoading:!1,relativePath:""},mt(u)}).finally(()=>{s.value=!1})):de.error("当前浏览器不支持该功能"),d=()=>{i.push("/")},m=M(()=>n.value?vt(n.value.name)?to:Wn:Qn);return ce(async()=>{const u=await ft().catch(g=>(console.warn("读取缓存的目录句柄失败, 目录可能已被删除",g),null));if(!u)return;const o={handle:u,isLoading:!1,isOpened:!0,relativePath:""},{handle:l,relativePath:c}=await pt()||{},a=await(l==null?void 0:l.getFile().catch(g=>(console.warn("读取缓存的文件句柄失败, 文件可能已被删除",g),!1)));if(!l||!a){t.value=o;return}t.value=await On({...o},l,c||"").catch(()=>o),n.value=l}),(u,o)=>{const l=ie,c=et,a=tt;return f(),C("div",no,[h("div",oo,[k(c,{onBack:d},{title:_(()=>[so]),content:_(()=>{var g;return[v(t)?(f(),C("code",lo,T((g=v(t))==null?void 0:g.handle.name),1)):S("",!0),k(l,{type:"primary",loading:v(s),text:"",onClick:r},{default:_(()=>[j(T(v(t)?"修改项目":"选择项目文件夹"),1)]),_:1},8,["loading"])]}),_:1})]),k(a,{class:"!mt-4 !mb-1"}),h("div",ao,[k(Kn,{activeFileHandle:v(n),root:v(t),class:"m-0 w-300px overflow-auto",onChangeActiveFileHandle:o[0]||(o[0]=g=>n.value=g)},null,8,["activeFileHandle","root"]),k(a,{direction:"vertical",class:"!h-full"}),(f(),$(F(v(m)),{"file-handle":v(n),class:"flex-1 w-0"},null,8,["file-handle"]))])])}}});export{Mo as default};
