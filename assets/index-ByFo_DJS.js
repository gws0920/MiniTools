import{b as U,u as A,E as T,_ as P,c as D}from"./base-bflHmD82.js";import{E as N}from"./el-button-4r8E0DMI.js";import{u as F}from"./pyRunner-BGu6GbCt.js";import{c as M}from"./index-C5mZHfjg.js";import{E as O}from"./el-message-BwlTGCWP.js";import{d as B,Y as V,m as _,c as w,o as a,h as y,w as b,D as x,b as c,x as i,g as e,i as z,j as v,a as m,l as j,f as S,t as E,F as J,e as I,J as Y,T as q,s as G,a7 as H,a8 as K}from"./index-DpTwNufQ.js";import{$ as Q,a as $,T as W}from"./index-Xv_KeUan.js";import{_ as X}from"./plugin-vueexport-helper-DlAUqK2U.js";import"https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js";import"./commonjsHelpers-Cpj98o6Y.js";import"./consumable-Dnn1CoAQ.js";import"./typescript-DvA-nEXU.js";import"./aria-BUADUvnR.js";const Z=["light","dark"],ee=U({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:Q($),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:Z,default:"light"}}),te={close:o=>o instanceof MouseEvent},se=B({name:"ElAlert"}),ae=B({...se,props:ee,emits:te,setup(o,{emit:r}){const u=o,{Close:k}=W,n=V(),s=A("alert"),f=_(!0),p=w(()=>$[u.type]),d=w(()=>[s.e("icon"),{[s.is("big")]:!!u.description||!!n.default}]),C=w(()=>({"with-description":u.description||n.default})),g=t=>{f.value=!1,r("close",t)};return(t,l)=>(a(),y(q,{name:e(s).b("fade"),persisted:""},{default:b(()=>[x(c("div",{class:i([e(s).b(),e(s).m(t.type),e(s).is("center",t.center),e(s).is(t.effect)]),role:"alert"},[t.showIcon&&e(p)?(a(),y(e(T),{key:0,class:i(e(d))},{default:b(()=>[(a(),y(z(e(p))))]),_:1},8,["class"])):v("v-if",!0),c("div",{class:i(e(s).e("content"))},[t.title||t.$slots.title?(a(),m("span",{key:0,class:i([e(s).e("title"),e(C)])},[j(t.$slots,"title",{},()=>[S(E(t.title),1)])],2)):v("v-if",!0),t.$slots.default||t.description?(a(),m("p",{key:1,class:i(e(s).e("description"))},[j(t.$slots,"default",{},()=>[S(E(t.description),1)])],2)):v("v-if",!0),t.closable?(a(),m(J,{key:2},[t.closeText?(a(),m("div",{key:0,class:i([e(s).e("close-btn"),e(s).is("customed")]),onClick:g},E(t.closeText),3)):(a(),y(e(T),{key:1,class:i(e(s).e("close-btn")),onClick:g},{default:b(()=>[I(e(k))]),_:1},8,["class"]))],64)):v("v-if",!0)],2)],2),[[Y,f.value]])]),_:3},8,["name"]))}});var oe=P(ae,[["__file","alert.vue"]]);const ne=D(oe),le=o=>(H("data-v-ee28fba0"),o=o(),K(),o),ie={class:"flex flex-col w-full p-2"},ce={class:"flex flex-1 h-0 overflow-hidden items-center justify-center"},re=le(()=>c("i",null,"点击选择图片",-1)),pe=["src"],ue=["src"],fe=B({__name:"index",setup(o){const{pyodide:r}=F({onLoaded:g}),u=new URL(""+new URL("../test_pkg-0.4-py3-none-any.whl",import.meta.url).href,import.meta.url).href,k=new URL(""+new URL("../test.jpg",import.meta.url).href,import.meta.url).href,n=_(),s=w(()=>n.value&&URL.createObjectURL(n.value)),f=_();let p;const d=_(!1),C=async()=>{if(!p)return O.warning("请等待加载完成");d.value=!0;const l=await M(n.value),h=p.get_gray_image(l.replace("data:image/jpeg;base64,",""));f.value=`data:image/jpeg;base64,${h}`,d.value=!1};async function g(){if(!r.value)return;const h=await(await fetch(u)).arrayBuffer();await r.value.loadPackage(["opencv-python"]),await r.value.unpackArchive(h,"wheel"),p=await r.value.pyimport("test_pkg"),console.log("test_pkg 初始化完成")}const t=async()=>{const[l]=await showOpenFilePicker({types:[{description:"Images",accept:{"image/*":[".png",".gif",".jpeg",".jpg"]}}],excludeAcceptAllOption:!0,multiple:!1});n.value=await l.getFile()};return G(async()=>{n.value=await fetch(k).then(l=>l.blob())}),(l,h)=>{const L=ne,R=N;return a(),m("div",ie,[I(L,{title:"通过自定义的.whl实现获取图片的回读图",type:"info"}),I(R,{type:"primary",class:"my-2",loading:e(d),onClick:C},{default:b(()=>[S("Run")]),_:1},8,["loading"]),c("div",ce,[c("div",{class:"source",onClick:t},[re,c("img",{src:e(s),alt:""},null,8,pe)]),c("img",{src:e(f),alt:"",class:"w-50%"},null,8,ue)])])}}}),Ie=X(fe,[["__scopeId","data-v-ee28fba0"]]);export{Ie as default};
